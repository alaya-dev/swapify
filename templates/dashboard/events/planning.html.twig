{% extends 'dashBord_user.html.twig' %} 


{% block content %} 
<style>
 .live-icon {
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.6;
        transform: scale(1.3);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

</style>

<div class="overflow-x-auto">
  <table class="min-w-full border-collapse border border-gray-300">
    <thead class="bg-gray-100">
      <tr class="border border-gray-300">
        <th class="px-4 py-2 text-left text-gray-700">Objective</th>
        <th class="px-4 py-2 text-left text-gray-700">Heure de Début</th>
        <th class="px-4 py-2 text-left text-gray-700">Heure de Fin</th>
        <th class="px-4 py-2 text-left text-gray-700">type de session</th>
        
        <th class="px-4 py-2 text-left text-gray-700">Actions</th>
      </tr>
    </thead>
    <tbody class="bg-white">
      {% for session in sessions %}
      <tr class="border border-gray-300">
        <td class="px-4 py-2 text-gray-600">
           {{ session.objective }}
        </td>
        <td class="px-4 py-2 text-gray-600">
          {{ session.startHour|date('d M, Y H:i') }}
        </td>
        <td class="px-4 py-2 text-gray-600">
          {{ session.endHour|date('d M, Y H:i') }}
        </td>
        <td class="px-4 py-2 text-gray-600">{{ session.typeSession }}</td>
        <td class="px-4 py-2 space-x-2">
            {% if  session.endHour > 'now'|date('Y-m-d H:i') %}
                {% set current_datetime = "now"|date('Y-m-d H:i:s') %}
                    {% if session.typeSession == 'En ligne'  %}
                        {% if session.startHour|date('Y-m-d H:i:s') <= current_datetime and session.endHour|date('Y-m-d H:i:s') >= current_datetime %}
                            <a
                                href="{{ path('join_online_sessionn', { id: session.id }) }}"
                                class="text-teal-600 hover:text-teal-800"
                                >join meeting</a>
                        {% else%}
                            <a href="{{ path('join_online_sessionn', { id: session.id }) }}" class="text-muted flex items-center group">
                                <i class="fas fa-circle text-red-700 animate-pulse mr-2"></i>
                                <span class="group-hover:hidden">Session En cours</span>
                                <span class="hidden group-hover:inline">Join Meeting</span>
                            </a>
                        {% endif %}
                    {% else %}
                        <span
                            
                                class="text-teal-600 hover:text-teal-800"
                                >session présentiel</span>
                    {% endif %}
                {% else %}
                    <span class="text-muted text-red-500">Session déja ecoulé</span>
                {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}