{% block title %}
    <a class="dropdown-item" 
    href="{{ path('app_dashboard') }}">
            <i class="bx bx-user font-size-16 align-middle me-1"></i>
            <span>Retour à la page d'accueil </span>
    </a> 
    
 {% endblock %}

{% block body %}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <div class="container mt-4">
        <h2>Mon profil</h2>

        {% for message in app.flashes('success') %}
            <div class="alert alert-success">{{ message }}</div>
        {% endfor %}

        {% for message in app.flashes('error') %}
        <div class="alert alert-danger">
            {{ message }}
        </div>
        {% endfor %}
   <div class="text-center">
        <img class="rounded-circle" 
             src="/uploads/images/admin.jpg" 
             style="width: 150px; height: 150px; object-fit: cover;" 
             alt="Profil Admin">
    </div><br>

        <div class="card">
            <div class="card-body">

            <div class="row">
            <div class="col-md-4 d-flex justify-content-center align-items-center" style="height: 100%;">
 
</div>


                {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

                <div class="mb-3">
                    <label class="form-label">Nom</label>
                    {{ form_widget(form.nom, { 'attr': {'class': 'form-control'} }) }}
                    <div id="nom-error" class="text-danger">{{ form_errors(form.nom) }}</div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Prénom</label>
                    {{ form_widget(form.prenom, { 'attr': {'class': 'form-control'} }) }}
                    <div id="prenom-error" class="text-danger">{{ form_errors(form.prenom) }}</div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Téléphone</label>
                    {{ form_widget(form.tel, { 'attr': {'class': 'form-control'} }) }}
                    <div id="tel-error" class="text-danger">{{ form_errors(form.tel) }}</div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Adresse</label>
                    {{ form_widget(form.adresse, { 'attr': {'class': 'form-control'} }) }}
                    <div class="text-danger">{{ form_errors(form.adresse) }}</div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Nouveau mot de passe</label>
                    {{ form_widget(form.password.first, { 'attr': {'class': 'form-control'} }) }}
                    <div class="text-danger">{{ form_errors(form.password.first) }}</div>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Confirmez le mot de passe</label>
                    {{ form_widget(form.password.second, { 'attr': {'class': 'form-control'} }) }}
                    <div class="text-danger">{{ form_errors(form.password.second) }}</div>
                </div>                


                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% block javascripts %}
    <script>
document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('form'); // Sélectionnez le formulaire
    const nomInput = document.querySelector('#{{ form.nom.vars.id }}'); // Champ nom
    const prenomInput = document.querySelector('#{{ form.prenom.vars.id }}'); // Champ prénom
    const telInput = document.querySelector('#{{ form.tel.vars.id }}'); // Champ téléphone

    const nomError = document.getElementById('nom-error'); // Conteneur pour l'erreur du nom
    const prenomError = document.getElementById('prenom-error'); // Conteneur pour l'erreur du prénom
    const telError = document.getElementById('tel-error'); // Conteneur pour l'erreur du téléphone

    form.addEventListener('submit', function (event) {
        let isValid = true;

        // Réinitialiser les messages d'erreur
        nomError.textContent = '';
        prenomError.textContent = '';
        telError.textContent = '';

        // Validation du nom
        if (nomInput.value.trim() === '') {
            nomError.textContent = 'Le nom ne peut pas être vide.';
            isValid = false;
        }

        // Validation du prénom
        if (prenomInput.value.trim() === '') {
            prenomError.textContent = 'Le prénom ne peut pas être vide.';
            isValid = false;
        }

        // Validation du téléphone
        if (telInput.value.trim() === '') {
            telError.textContent = 'Le téléphone ne peut pas être vide.';
            isValid = false;
        } 
        // Empêcher la soumission du formulaire si invalide
        if (!isValid) {
            event.preventDefault();
        }
    });
});    </script>
{% endblock %}
{% endblock %}